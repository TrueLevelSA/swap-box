<Background@Image>:
    source: 'img/bgreen.jpg'
    allow_stretch: True
    keep_ratio: False

<BlackLabel@Label>:
    color: [0,0,0,1]

<MediumButton@Button>:
    size_hint_x: 0.1
    size_hint_y: .8
    font_size: 30
    background_color: [1,0,0,.2]

<MainBox@BoxLayout>:
    size_hint_y: .8
    canvas.before:
        Color:
            rgba: 5,5,5,.5
        Rectangle:
            pos: self.pos
            size: self.size

<ButtonBox@BoxLayout>:
    spacing: 20  
    size_hint_y: .2

<ScreenWelcome>:
    BoxLayout:
        Button:
            id: "welcome_Button"
            text: app._languages[app._selected_language]["welcome"]
            font_size: 20
            on_press: root.manager.current = "main"

<ScreenMain>:
    Background
    BoxLayout:
        orientation: "vertical"
        padding: 50
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: .3
            BlackLabel:
                font_size:30
                text: app._languages[app._selected_language]["main_title"]
            BoxLayout:
                orientation: "horizontal"
                size_hint_x: .6
                padding: 10
                #Button:    
                #    size_hint_x: .3          
                #    text: app._languages[app._selected_language]["admin_menu"]
                #    on_press: 
                #        root.manager.transition.direction = 'left'
                #        root.manager.current = "settings"
                Label:
                    size_hint_x: 0.3
                MediumButton:    
                    size_hint_x: .9
                    size_hint_y: 1.5
                    disabled: True
                    text: app._languages[app._selected_language]["language"]

        ScreenManager:
            id: sm1
            size_hint_y: 2
    

<ScreenMenu>:
    id: menu_screen
    name: 'menu'
    BoxLayout:
        orientation: "vertical"
        MainBox:
            orientation: "horizontal"
            BoxLayout:
                orientation: "vertical"
                BlackLabel:
                    size_hint_y: .15
                    font_size: 25
                    text: app._languages[app._selected_language]["select_crypto"]
                BoxLayout:
                    orientation: "horizontal"
                    BoxLayout:
                        orientation: "vertical"
                        Label:
                            text: 'ETHEREUM (ETH)' 
                            font_size: 20
                            size_hint_y: .2
                            color: [0,0,0,1]
                        Image:
                            source: 'img/ETH-logo.png'
                            allow_stretch: True
                            size_hint_y: .5
                            keep_ratio: True
                        Label:
                            text: 'Buy = {:.2f} CHF'.format(app._chf_to_eth)
                            size_hint_y: .1
                            font_size: 20
                            color: [0,0,0,1]
                        Label:
                            text: 'Sell = {:.2f} CHF'.format(app._eth_to_chf)
                            size_hint_y: .1
                            font_size: 20
                            color: [0,0,0,1]
                Label:
                    #text: 'Message Tu es la'
                    #font_size: '20' 
                    size_hint_y: .1
 
        ButtonBox:
            orientation: "horizontal"
            MediumButton:
                text: app._languages[app._selected_language]["buy"]
                on_press: 
                    root.manager.transition.direction = 'left'
                    root.manager.current = "scan_screen"
            MediumButton:
                text: app._languages[app._selected_language]["sell"]
                disabled: True
            MediumButton:
                text: app._languages[app._selected_language]["redeem"]
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = "redeem"
                disabled: True

<ScreenBuyScan>:
    name: "scan_screen"
    BoxLayout:
        orientation: "vertical"
        MainBox:
            orientation: "horizontal"
            BoxLayout:
                orientation: "vertical"
                BlackLabel:
                    text: app._languages[app._selected_language]["inputkey"]
                    font_size:20
                Image:
                    source: 'img/Qrcode.png'
                    allow_stretch: True
                    keep_ratio: True            
                BoxLayout:
                #    orientation: 'vertical'
                #    Label:
                #        font_size: '20'
                #        color: [0,0,0,1]
                #        size_hint_y : .1
                #        allow_stretch: True
                #        text: app._languages[app._selected_language]["inputwallet"]
                #    BoxLayout:
                #        size_hint_y : .2
            BoxLayout:
                size_hint_x : .1
            BoxLayout:
                orientation: "vertical" 
                BoxLayout:
                    size_hint_y : .2     
                Button:
                    text: "Camera is loading" 
                    on_press: 
                        root.manager.transition.direction = 'left'
                        root.manager.current = "insert_screen"
                    size_hint_x : .9
                BoxLayout:
                    size_hint_y : .2
        ButtonBox:
            orientation: "horizontal"
            MediumButton:
 
                text: app._languages[app._selected_language]["menu"]
                on_press: 
                    root.manager.transition.direction = 'right'
                    root.manager.current = "menu"
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .2


<ScreenBuyInsert>:
    name: "insert_screen"
    BoxLayout:
        orientation: "vertical"
        MainBox:
            orientation: "vertical"
            BoxLayout:
                size_hint_y: 0.05
            BlackLabel:
                text: app._languages[app._selected_language]["inputfiat"]
                font_size:25
                size_hint_y: 0.1
            BoxLayout:
                size_hint_y: 0.05
            BoxLayout:
                orientation: "horizontal"
                size_hint_y:0.8
                BoxLayout:
                    orientation: "vertical"
                   
                    Image:
                        id: image_qr
                        source: 'tmp/qr.png'
                        allow_stretch: False 
                        size_hint_y : 2
                        keep_ratio: True            
                    BlackLabel:
                        site_hint_y: 0.2
                        font_size: 12      
                        text: root._address_ether

                BoxLayout:
                    size_hint_x : .1
                BoxLayout:
                    orientation: "vertical" 
                    BoxLayout:
                        size_hint_y : .2   
                        BlackLabel:
                            text: app._languages[app._selected_language]["fiatvalue"]
                            font_size:20
                    BoxLayout:
                        size_hint_y : .2
                        canvas.before:
                            Color:
                                rgba: 5,5,5,.5
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        BlackLabel:
                            text: "{} CHF".format(root._cash_in)
                            font_size:20
                    BoxLayout:
                        size_hint_y : .2  
                        BlackLabel:
                            text: app._languages[app._selected_language]["cryptovalue"]
                            font_size:20
                    BoxLayout:
                        size_hint_y : .2  
                        canvas.before:
                            Color:
                                rgba: 5,5,5,.5
                            Rectangle:
                                pos: self.pos
                                size: self.size

                        BlackLabel:
                            text: "~{:.2f} ETH".format(root._cash_in / app._chf_to_eth)
                            font_size:20      
                    BoxLayout:
                        size_hint_y : .2
        ButtonBox:
            orientation: "horizontal"
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .1
            MediumButton:
                text: app._languages[app._selected_language]["menu"]
                on_press:
                    root._leave_without_buy()
                    root.manager.transition.direction = 'right'
                    root.manager.current = "menu"
            MediumButton:
                disabled: root._cash_in <= 0
                text: app._languages[app._selected_language]["confirm"]
                on_press:
                    root.manager.transition.direction = 'left'
                    root.manager.current = "buy3"
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .1

<ScreenBuy3>:
    name: "buy3"
    BoxLayout:
        orientation: "vertical"        
        BoxLayout:
            orientation: "horizontal"
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .05
            MainBox:
                orientation: "horizontal"
                size_hint_x : .1
                BoxLayout:
                    orientation: "vertical" 
                    BoxLayout:
                        size_hint_y : .2   
                        BlackLabel:
                            text: app._languages[app._selected_language]["thank"]
                            font_size:20
                    BoxLayout:
                        size_hint_y : .2
                        canvas.before:
                            Color:
                                rgba: 5,5,5,.5
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        BlackLabel:
                            text: "500 CHF"
                            font_size:20
                    BoxLayout:
                        size_hint_y : .2  
                        BlackLabel:
                            text: app._languages[app._selected_language]["cryptovalue"]
                            font_size:20
                    BoxLayout:
                        size_hint_y : .2  
                        canvas.before:
                            Color:
                                rgba: 5,5,5,.5
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        BlackLabel:
                            text: "(ETH) 2.5"
                            font_size:20      
                    BoxLayout:
                        size_hint_y : .2
                        BlackLabel:
                            text: root._address
                            font_size:20
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .05

        ButtonBox:
            orientation: "horizontal"
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .2
            MediumButton:
                text: app._languages[app._selected_language]["confirm"]
                on_press: 
                    root.manager.transition.direction = 'right'
                    root.manager.current = "menu"
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .2


<ScreenRedeem>:
    name: "redeem"
    BoxLayout:
        orientation: "vertical"
        MainBox:
            orientation: "horizontal"
            BlackLabel:
                text: "Readeem Code"

        ButtonBox:
            orientation: "horizontal"
            MediumButton:
 
                text: app._languages[app._selected_language]["menu"]
                on_press:
                    root.manager.transition.direction = 'right'
                    root.manager.current = "menu"
            
            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .2

<ScreenSettings>:
    MainBox:
        orientation: "horizontal"
        TabbedPanel:
            tab_pos: 'bottom_right'
            do_default_tab: False
            TabbedPanelItem:
                text: app._languages[app._selected_language]["connectivity"]
                MainBox: 
                    Label:
                        text: "Wifi Menu"

            TabbedPanelItem:
                text: app._languages[app._selected_language]["crypto"]
                MainBox: 
                    Button:
                        text: "crypto keys config"
                        on_press: root.manager.current = 'main'


<ScreenConfirmation>:
    MainBox:
        orientation: "horizontal"
