#:import StepsWidget src.components.steps

<GreyLabelLarge@BlackLabelLarge>
    color: "#ababab"

<LabelInfoTitle@BlackLabelLarge>
    valign: "center"
    halign: "left"
    text_size: self.size

<LabelInfoText@LabelInfoTitle>
    bold: True

<LightBoxLayout@BoxLayout>
    canvas.before:
        Color:
            rgba: 5,5,5,.5
        Rectangle:
            pos: self.pos
            size: self.size

<ScreenTitle@LabelBase>
    size_hint_y: 0.2
    font_size: 50
    color: color_off_white

<MainLayout@BoxLayout>
    orientation: "vertical"
    spacing: 40


<ScreenSelectCrypto>:
    MainLayout:
        ScreenTitle:
            text: app._languages[app._selected_language]['select_currency']

        BoxLayout:
            orientation: "horizontal"
            spacing: 10

            StepsWidget:
                id: steps
                size_hint_x: 3
            TokensRecycleView:
                id: rv_tokens
                size_hint_x: 9
                halign: "center"

        BoxLayout:
            size_hint_y: .3
            spacing: 10
            ButtonDark:
                id: button_back
                text: app._languages[app._selected_language]['go_back']
                size_hint_x: 3
                on_release: root.button_back()
            ButtonLight:
                id: button_confirm
                text: app._languages[app._selected_language]['confirm']
                size_hint_x: 9
                on_release: root.button_confirm()

<ScreenBuyScan>:
    MainLayout:
        ScreenTitle:
            text: app._languages[app._selected_language]['inputkey']
        BoxLayout:
            orientation: "horizontal"
            spacing: 10

            StepsWidget:
                id: steps
                size_hint_x: 3

            BoxLayoutBackground:
                orientation: "horizontal"
                size_hint_x: 9
                background_color: color_darker_black

                Label:
                    text: "yo"
                Image:
                    source: 'assets/img/phoneqr.png'
                    allow_stretch: True
                    keep_ratio: True

        BoxLayout:
            size_hint_y: .3
            spacing: 20
            ButtonDark:
                id: button_back
                text: app._languages[app._selected_language]['go_back']
                size_hint_x: 3
                on_release: root.button_back()
            Widget:
                size_hint_x: 9

<ShowBox@BoxLayout>
    canvas.before:
        Color:
            rgba: color_off_white
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
    padding: (40, 20)
    orientation: "horizontal"

<ShowBoxTitle@Label>
    halign: "left"
    valign: "center"
    text_size: self.size
    font_size: 20

<ShowBoxText@ShowBoxTitle>
    halign: "right"

<SideBox@BoxLayoutBackground>
    background_color: color_darker_black
    padding: (40, 40)

<ScreenBuyInsert>:
    MainLayout:
        ScreenTitle:
            text: app._languages[app._selected_language]['inputfiat']
        BoxLayout:
            orientation: "horizontal"
            spacing: 10

            StepsWidget:
                id: steps
                size_hint_x: 3

            BoxLayout:
                orientation: "horizontal"
                size_hint_x: 9

                BoxLayout:
                    orientation: "vertical"
                    spacing: 10

                    ShowBox:
                        ShowBoxTitle:
                            text: app._languages[app._selected_language]['receiving_address']
                        ShowBoxText:
                            size_hint_x: 1.5
                            text: app.format_small_address(root._label_address_to)

                    ShowBox:
                        ShowBoxTitle:
                            text: app._languages[app._selected_language]['inserted_cash']
                        ShowBoxText:
                            font_size: 40
                            text: app.format_fiat_price(root._inserted_cash)

                    ShowBox:
                        ShowBoxTitle:
                            text: app._languages[app._selected_language]['minimum_received']
                        ShowBoxText:
                            text: app.format_crypto_price(root._inserted_cash / root._token_price, root._token_symbol, 6)

                BoxLayout:
                    orientation: "vertical"
                    spacing: 10
                    size_hint_x: 0.5

                    Widget:
                    SideBox:
                        ShowBoxTitle:
                            id: max_amount_title
                            text: app._languages[app._selected_language]['max_amount']
                        ShowBoxText:
                            id: max_amount_text
                            size_hint_x: 0.5
                            text: root._label_max_amount
                    SideBox:
                        ShowBoxTitle:
                            size_hint_x: 0.5
                            text: "1 {} =".format(root._token_symbol)
                        ShowBoxText:
                            text: app.format_fiat_price(root._token_price, 3)

        BoxLayout:
            size_hint_y: .3
            spacing: 10

            ButtonDark:
                id: button_back
                text: app._languages[app._selected_language]['cancel']
                size_hint_x: 3
                on_release: root.button_back()
            ButtonLight:
                id: button_confirm
                disabled: True
                size_hint_x: 9
                text: app._languages[app._selected_language]['buy']
                on_release: root.button_confirm()



<ScreenBuyFinal>:
    MainLayout:
        ScreenTitle:
            text: app._languages[app._selected_language]['tx_completed']
        BoxLayout:
            orientation: "horizontal"
            spacing: 10

            StepsWidget:
                id: steps
                size_hint_x: 0.3

            BoxLayout:
                orientation: "vertical"
                size_hint_x: 0.6
                spacing: 10

                ShowBox:
                    ShowBoxTitle:
                        size_hint_x: 0.3
                        text: app.format_crypto_price(root._crypto_bought, root._token_symbol)
                    LabelBase:
                        size_hint_x: 0.3
                        text: "----->"
                    ShowBoxText:
                        size_hint_x: 0.3
                        text: app.format_fiat_price(root._inserted_cash)

                ShowBox:
                    BoxLayout:
                        orientation: "vertical"
                        BoxLayout:
                            orientation: "horizontal"
                            ShowBoxTitle:
#                                size_hint_x: 0.3
                                text: "Operator fees paid"
                            ShowBoxText:
#                                size_hint_x: 0.1
                                color: color_gray_3
                                text: "{} %".format(root._operator_fee_percent)
                            ShowBoxText:
#                                size_hint_x: 0.2
                                text: app.format_fiat_price(root._operator_fee_percent * root._inserted_cash)
                        BoxLayout:
                            orientation: "horizontal"
                            ShowBoxTitle:
                                text: "Network + LP fees"
                            ShowBoxText:
                                text: "{} %".format(root._network_fee_percent)
                                color: color_gray_3
                            ShowBoxText:
                                text: app.format_fiat_price(root._network_fee_percent * root._inserted_cash)
                ShowBox:
                    ShowBoxTitle:
                        text: app._languages[app._selected_language]["customeraddress"]
                    ShowBoxText:
                        text: app.format_small_address(root._label_address_to)

            BoxLayoutBackground:
                background_color: color_darker_black
                orientation: "vertical"
                size_hint_x: 0.3
                padding: (40, 40)
                LabelBase:
                    text: "View transaction order (WIP)"
                    size_hint_y: 0.1
                Image:
                    source: 'assets/img/fake_tx_qr.png'
                    allow_stretch: True
                    keep_ratio: True

        BoxLayout:
            size_hint_y: .3
            spacing: 20

            ButtonLight:
                text: app._languages[app._selected_language]['go_home']
                on_release: root.button_confirm()
