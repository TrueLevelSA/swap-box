#:import Factory kivy.factory.Factory
#:import TripleTapImage template

#:include template/screen_menu.kv
#:include template/screens_buy.kv
#:include template/screens_sell.kv
#:include template/screens_setup.kv

<Background@Image>:
    source: 'assets/img/bgreen.jpg'
    allow_stretch: True
    keep_ratio: False

<LayoutPopup@BoxLayout>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'assets/img/bgreen.jpg'

# Label with black font
<BlackLabel@Label>:
    color: [0,0,0,1]
    font: 'MyriadPro-Bold.otf'
    markup: True

# Label with black font, small font size
# used for content
<BlackLabelSmall@BlackLabel>:
    font_size: 22

# Label with black font, medium font size
# used for subtitles
<BlackLabelMedium@BlackLabel>:
    font_size: 24

# Label with black font, large font size
<BlackLabelLarge@BlackLabel>:
    font_size: 28

# Label with white font, large font size
# used for titles
<WhiteLabelLarge@BlackLabel>:
    font_size: 60
    bold: True
    color: 1,1,1,1

<WhiteLabelMedium@BlackLabel>:
    font_size: 28
    color: 1,1,1,1

<MediumButton@ColorDownButton>:
    # size_hint_x: 0.1
    size_hint_y: .8
    font_size: 30
    background_color: [0,0,0,.4]
    color: 1,1,1,1
    background_color_normal: 0,0,0,0.4
    background_color_down: 0,0,0,0.6
    font_size: 30

<FullScreenPopup@ModalView>:
    size_hint_y: 1
    size_hint_x: 1


<MainBox@BoxLayout>:
    size_hint_y: .8
    canvas.before:
        Color:
            rgba: 5,5,5,.3
        Rectangle:
            pos: self.pos
            size: self.size

<ButtonBox@BoxLayout>:
    spacing: 20
    size_hint_y: .2
    orientation: 'horizontal'

<SyncPopup@FullScreenPopup>:
    Background
    BoxLayout:
        BlackLabelLarge:
            text: app._languages[app._selected_language]["not_sync"] # + " {}/{}".format(app._sync_block, app._current_block)

<ScreenWelcome>:
    BoxLayout:
        Button:
            id: "welcome_Button"
            text: app._languages[app._selected_language]["welcome"].format(app._config.NAME)
            font_size: 20
            on_press: root.manager.current = "main"

<ScreenMain>:
    Background
    BoxLayout:
        orientation: "vertical"
        padding: 10
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: .4
            BoxLayout:
                orientation: "vertical"
                size_hint_x: .3
                TripleTapImage:
                    source: "assets/img/poweredbyuniswap2.png"
                    on_triple_tap: root.set_current_screen('setup_1')
                BlackLabel:
                    font_size:30
                    bold: True
                    text: app._languages[app._selected_language]["main_title"].format(app._config.NAME)
            BoxLayout:
                orientation: "horizontal"
                size_hint_x: 0.7
                padding: 20

                Label:
                    size_hint_x: 0.2
                LanguageBar:

        ScreenManager:
            id: sm_content
            size_hint_y: 2

<ScreenLoading>:
    BoxLayout:
        orientation: "vertical"
        MainBox:
            orientation: "horizontal"
            BlackLabelSmall:
                text: "Loading..."
        ButtonBox:
            BoxLayout:
                size_hint_x: .2
            MediumButton:
                text: app._languages[app._selected_language]["menu"] + " /!\\"
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = "menu"
            BoxLayout:
                size_hint_x: .2

<ScreenRedeem>:
    BoxLayout:
        orientation: "vertical"
        MainBox:
            orientation: "horizontal"
            BlackLabelSmall:
                text: "Readeem Code"

        ButtonBox:
            MediumButton:

                text: app._languages[app._selected_language]["menu"]
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = "menu"

            BoxLayout:
                orientation: "horizontal"
                size_hint_x : .2

<ScreenSettings>:
    MainBox:
        orientation: "horizontal"
        TabbedPanel:
            tab_pos: 'bottom_right'
            do_default_tab: False
            TabbedPanelItem:
                text: app._languages[app._selected_language]["connectivity"]
                MainBox:
                    Label:
                        text: "Wifi Menu"

            TabbedPanelItem:
                text: app._languages[app._selected_language]["crypto"]
                MainBox:
                    Button:
                        text: "crypto keys config"
                        on_press: root.manager.current = 'main'


<ScreenConfirmation>:
    MainBox:
        orientation: "horizontal"
