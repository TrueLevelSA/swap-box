#:import Factory kivy.factory.Factory
#:import HomeLogo src.components.home_logo
#:import ColorDownButton src.components.button_color_down
#:import MediumButton src.components.button_color_down
#:import LanguageBar src.components.language_bar

#:include template/screen_menu.kv
#:include template/screens_buy.kv
#:include template/screens_sell.kv
#:include template/screens_setup.kv

#:include template/button.kv
#:include template/label.kv
#:include template/listview_tokens.kv

#:include template/colors.kv

<LayoutPopup@BoxLayout>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'assets/img/bgreen.jpg'

<FullScreenPopup@ModalView>:
    size_hint_y: 1
    size_hint_x: 1

<BoxLayoutBackground@BoxLayout>:
    canvas.before:
        Color:
            rgba: self.background_color if self.background_color else color_transparent
        Rectangle:
            size: self.size
            pos: self.pos

<MainBox@BoxLayout>:
    size_hint_y: .8
    canvas.before:
        Color:
            rgba: 5,5,5,.3
        Rectangle:
            pos: self.pos
            size: self.size

<ButtonBox@BoxLayout>:
    spacing: 20
    size_hint_y: .2
    orientation: 'horizontal'

<SyncPopup@FullScreenPopup>:
    BoxLayout:
        LabelTitle:
            text: app._languages[app._selected_language]["not_sync"] # + " {}/{}".format(app._sync_block, app._current_block)

<ScreenWelcome>:
    BoxLayout:
        Button:
            id: "welcome_Button"
            text: app._languages[app._selected_language]["welcome"].format(app._config.operator_name)
            font_size: 20
            on_press: root.manager.current = "main"

<ScreenMain>:
    BoxLayoutBackground:
        background_color: color_off_black
        orientation: "vertical"
        padding: 20

        # Header
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.2
            spacing: 10
            HomeLogo:
                size_hint_x: 2
                allow_stretch: True
                keep_ratio: True
                source: "assets/img/swapbox_bg.png"
                on_triple_tap: root.set_current_screen('setup_1')

            Widget:
                size_hint_x: 1

            LanguageBar:
                size_hint_x: 7
                spacing: 10
            ButtonDark:
                size_hint_x: 1
                text: "?"
            ButtonLight:
                size_hint_x: 1
                text: "Stop"

        ScreenManager:
            id: sm_content
            size_hint_y: 2

<ScreenSettings>:
    MainBox:
        orientation: "horizontal"
        TabbedPanel:
            tab_pos: 'bottom_right'
            do_default_tab: False
            TabbedPanelItem:
                text: app._languages[app._selected_language]["connectivity"]
                MainBox:
                    Label:
                        text: "Wifi Menu"

            TabbedPanelItem:
                text: app._languages[app._selected_language]["crypto"]
                MainBox:
                    Button:
                        text: "crypto keys config"
                        on_press: root.manager.current = 'main'
